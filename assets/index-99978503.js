import{d as D,r as s,c as E,o as L,e as h,g as o,s as m,A as w,F as b,l as x,b as _,n as I,u as T,_ as K}from"./index-0cadee62.js";const N={class:"container"},S={style:{padding:"0 10px",display:"flex","justify-content":"space-between"}},$={style:{color:"blue"}},M={style:{color:"red"}},O=["onClick"],F=D({__name:"index",setup(P){const t={rows:5,columns:3,op:3},i=s(),n=s(),v=s(0),d=s(-1),p=s(0),c=s(t.op),f=s(1),r=E(()=>({width:i.value.clientWidth,height:i.value.clientHeight,blockWidth:i.value.clientWidth/t.columns,blockHeight:i.value.clientHeight/t.rows})),C=e=>({width:`${r.value.width/t.columns}px`,height:`${r.value.height/t.rows}px`,backgroundColor:e===0?"white":"black"}),g=()=>{let e=new Array(t.columns),l=parseInt(Math.random()*t.columns);for(let a=0;a<t.columns;a++)a===l?e[a]=1:e[a]=0;return e},k=()=>{let e=new Array(t.rows);r.value.width/t.rows;for(let l=0;l<t.rows;l++)e[l]=g();n.value=e},H=(e,l)=>{const a=n.value[e][l];if(a===0){c.value-=1,c.value<=-1&&(clearInterval(d.value),alert("游戏结束！"));return}if(e===t.rows-1&&a===1){n.value[e][l]=0,p.value+=1;const u=10;p.value%u===0&&(f.value=Math.tanh(p.value*45/300/u)+1),n.value.unshift(g())}},B=()=>{clearInterval(d.value),d.value=setInterval(()=>{if(v.value+=f.value,v.value>=r.value.height){let e=!1;e=n.value[n.value.length-1].indexOf(1)!==-1,e?(c.value-=1,c.value<=-1&&(clearInterval(d.value),alert("游戏结束！"))):(v.value-=r.value.blockHeight,n.value.pop())}})},W=()=>{clearInterval(d.value),c.value=t.op,p.value=0,f.value=1,v.value=0,k()};return L(()=>{k()}),(e,l)=>(_(),h("div",N,[o("div",S,[o("span",null,[o("button",{style:{"margin-right":"5px"},onClick:B},"开始"),o("button",{onClick:W},"重置")]),o("span",null,[m("得分： "),o("span",$,w(p.value),1)]),o("span",null,[m("OP： "),o("span",M,w(c.value),1)])]),o("div",{ref_key:"rootNode",ref:i,class:"root"},[(_(!0),h(b,null,x(n.value,(a,u)=>(_(),h("div",{class:"row",key:u,style:I({top:`${v.value+(u-n.value.length)*T(r).blockHeight}px`})},[(_(!0),h(b,null,x(a,(A,y)=>(_(),h("div",{class:"cell",onClick:z=>H(u,y),style:I(C(A)),key:y},null,12,O))),128))],4))),128))],512)]))}});const q=K(F,[["__scopeId","data-v-ce3571e6"]]);export{q as default};
